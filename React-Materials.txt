				User interface Technology


Static User Interface : hand coded html pages
Dynamic User interfaces
 creating html pages dynamically

Web ;
 1989 to 1995 -static user interface
 1995 -dynamic web - html pages created dynamically
 CGI -C,perl
 j2ee -servlet
 php
 asp

2005 - REST Full webservices - data

2006 - CREATE DYnamic web page using plain javascript itself.

-angular js - SPA
-Ember js
etc..
template driven technology

2013 -React - Flux.

 Buidling dynamic user interface using spa tech.


React :

What is react?
React architecture?
How to create UI apps using react?

What is react?
 A JavaScript library for building user interfaces.

What is lib and framework?

 lib solves only one problem where as framework provides every thing end to end to build apps

What is user interfaces? How to build them?

Userface : where user interacts.
 eg: desk apps,web interfaces(browser apps),mobile apps,any other device apps(tv...)
1.Browsers App
   How to create browser apps
   -tech stack - html,css,js.
2.Mobile App

React can help to creates apps using html,css js- abstraction for these tech stack.


React features

1.declarative lib
pl can be classified into

1.declarative pl----libs/frameworks
2.imperative pl---libs/frameworks


1.Imperative
   
let customers = [{id:1,name:'a',city:'test'}];

i want find out all customers in chennai city.

function findCustomerByCity(city){
  let result = [];
 for(let i=0;i<customers.length;i++){
    let customer  =customers[i];
   //logic
   if(customer.city === city){
	  result.push(customer);
   }

}
  return result
}

findCustomerByCity('chennai');

2.Declarative

function findCustomerByCity(city){
     return customers.filter(customer=>customer.city == city);
}

findCustomerByCity('chennai');
.............................................................................................
				HTML internals



1.HTML IS PL? - YES
2.HTML Is compiled -YES
3.HTML is excuted-YES


index.html -source code
<html>
<head></head>
<title><title>
<body>
  <div>
     <h1>Welcome</h1>
  </div>
</body>
</html>


..
html element = object = compoent
 h1            H1Element Heading


<div>
   <nav>
     <a>...</a>
   </nav>
</div>

let doc = { 
  
   div : {
      nav: {
         a: {
         }
      }
   }

}
React :

What is react?
React architecture?
How to create UI apps using react?

What is react?
 A JavaScript library for building user interfaces.

What is lib and framework?

 lib solves only one problem where as framework provides every thing end to end to build apps

What is user interfaces? How to build them?

Userface : where user interacts.
 eg: desk apps,web interfaces(browser apps),mobile apps,any other device apps(tv...)
1.Browsers App
   How to create browser apps
   -tech stack - html,css,js.
2.Mobile App

React can help to creates apps using html,css js- abstraction for these tech stack.


React features

1.declarative lib
pl can be classified into

1.declarative pl----libs/frameworks
2.imperative pl---libs/frameworks


1.Imperative
   
let customers = [{id:1,name:'a',city:'test'}];

i want find out all customers in chennai city.

function findCustomerByCity(city){
  let result = [];
 for(let i=0;i<customers.length;i++){
    let customer  =customers[i];
   //logic
   if(customer.city === city){
	  result.push(customer);
   }

}
  return result
}

findCustomerByCity('chennai');

2.Declarative

function findCustomerByCity(city){
     return customers.filter(customer=>customer.city == city);
}

findCustomerByCity('chennai');

Declarative code make your code more predictable and easier to debug.
...........................................................................................
HTML:

1.HTML IS PL? - YES
2.HTML Is compiled -YES
3.HTML is excuted-YES


java
  -source .java
 -compile -.class -assembly
 -excute -jvm--result

HTML internal work flow:
........................

index.html -source code
<html>
<head></head>
<title><title>
<body>
  <div>
     <h1>Welcome</h1>
  </div>
</body>
</html>
-------------------Browser
loader---LOAD Code into browser
 |
   from file: or http:
 |
Parser : Parser is special compiler which converts source into lexcial tree(string tree)
 |
body
  div
     h1
        Welcome 
     h1
  div
body
|
 Complier-Compilation : Convert this into assembly
|
body -load xxx
  div
     h1
        Welcome 
     h1
  div
body
|
-------------------------Execution cycle------------------------------------
HTML Execution engine : Request Os ,to allocate memory :Runtime

-LinkedList
body -Node
  div -Node
     h1 -Node
        Welcome -Node
     h1
  div
body
| 
 Linking the Nodes: Tree
body  -Node
  |
  div -Node
    |
     h1 -Node
      |
        Welcome -Node
        |
     h1
  div
body
|
Layout/Paint Engine: will convert nodes into pxs : final output


..............................................................................................
Static web pages: htmls are displayed into browser.
..............................................................................................
In 1996,Netscap communication,Started an RND project called "How to manipulate the tree"

Tree is written in c language,then we need another c program to communicate.



But NETSCAP decided not to use C pl.

Netscap wanted to put java like implementation inside browser to manipulate "Tree".

that is birth of javascript.

How to access nodes from javascript engine?
  
One spec was published ,As per that spec
 "Document Object Model"
    -How to represent document(elements/nodes) in object oriented way.->DOM

 "Documents can be reprsented as Objects" : Object oriented Document Programming.



One spec was published ,As per that spec
 "Document Object Model"
    -How to represent document(elements/nodes) in object oriented way.->DOM

 "Documents can be reprsented as Objects" : Object oriented Document Programming.
............................................................................................

How dom works?

index.html           Broser runtime(C program)         Javascript Engine
<h1>Hello</h1>       h1-Node                           h1- Object
			Hello-Node			 Hello Object Property



                 Every Html ELEMENT Inside Browser is "C Program"

	       Every Html ELEMENT javascript engine is "Object"


javascript developer ---->uses api --->to communicate Object---->js engine---->browser engine.	*******************************************************************************************	
Who and when "H1" object is created?

if you want to create object?

 class/ function

function Employee(){}  let emp = new Employee()


<h1> => function HTMLHeadingElement(){} => let h =new HTMLHeadingElement() ?



if you want to create object?

 class/ function

function Employee(){}  let emp = new Employee()

<h1> => function HTMLHeadingElement(){} => let h =new HTMLHeadingElement() ?

Note: For html elements, we cant create object directly, rather than JS Engine will create objects , return references to the developer to access.
 How via factory Objects: object helps to get other documents


Factory Object : HTML Document =>body

document.getElementById();
   |
Implicit object reference variable which points HTMLDocument OBject.

.............................................................................................

What is our objective here? DOM Programming?


Enter into DOM programming:

1.write dom programming using javascript language.

<body>
  |
HTMLDocument : body : factory Object


Document apis:

Finding HTML Elements

HTMLElement document.getElementById(id)	       Find an element by element id


HTMLElement Document document.getElementsByTagName(name)	Find elements by tag name


HTMLElement document.getElementsByClassName(name)	Find elements by class name


HTMLElement document.querySelectory(selector)        find element/elements by selector


Changing HTML Elements : update existing element
......................
element.innerHTML =  new html content	Change the inner HTML of an element
element.attribute = new value	Change the attribute value of an HTML element
element.style.property = new style	Change the style of an HTML element
Method	Description
element.setAttribute(attribute, value)	Change the attribute value of an HTML element

Adding and Deleting Elements

document.createElement(element)	Create an HTML element

document.removeChild(element)	Remove an HTML element

document.appendChild(element)	Add an HTML element

document.replaceChild(new, old)	Replace an HTML element

////////////////////////////////////////////////////////////////////////////////////////////

DOM programming :

Create new Element:

1.create element
2.attach that element on existing tree. appendChild

function findElement() {
      //get the h1
      const element = document.getElementById('heading');
      console.dir(element);
      //get the content
      console.log(element.innerHTML);
}
findElement();

function updateElement() {
      const element = document.getElementById('heading');
      //element.innerText = 'Welcome to React' : Plain String
      element.innerHTML = 'Welcome to React!'; // which is node
}
updateElement()

function createElement() {
      const element = document.createElement('h2');
      element.innerHTML = 'Hey Buddy Are you new to DOM!';
      //attach that element
      document.body.appendChild(element);
}
createElement();

function applyStyle() {
      const element = document.getElementById('heading');
      //css property inside javascript
      element.style.backgroundColor = 'yellow'

}
applyStyle()

User interaction : Event Handling : UI events

Hardware events : mouse,keyboard,touch events
application events : onload,onupdate,offline,online........

How to add user interaction?

Every dom element has ability to subscribe events called dom events.

ways to attach events?

1.inline events
2.through coding

eventattachment has syntax

on+EventName = "callbackfunction /handler function"

Event Object : Object asscioated with every dom element.

 Which is proxy object between dom element and handler function.

if you want to access any dom element inside event handler, event object will help
event object is created and ready for use inside handler function arg.


 <h1 id="heading" onmouseout="applyMouseOut(event)" onmouseover="applyDynamicStyle(event)">Welcome to DOM</h1>

function applyDynamicStyle(e) {
      console.dir(e);
      const element = e.target;
      console.log(element);
      element.style.backgroundColor = 'green'

}

function applyMouseOut(e) {
      const element = e.target;
      element.style.backgroundColor = 'yellow'
}


<h1 id="heading">Welcome to DOM</h1>

function applyDynamicStyle(e) {
      console.dir(e);
      const element = e.target;
      console.log(element);
      element.style.backgroundColor = 'green'

}
function applyMouseOut(e) {
      const element = e.target;
      element.style.backgroundColor = 'yellow'
}

document.getElementById('heading').addEventListener('mouseover', applyDynamicStyle)

document.getElementById('heading').addEventListener('mouseout', applyMouseOut);
//////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////


javascript language can be used to manipulate web documents.

When we use javascript language directly , we face lot of problems

1.Complexity
2.Performance
3.No standard practice

In 2001,DOM Wrappers - libs /frameworks came into picture.
 DOJO
2005, JQuery
/////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////

Architecture tech stack for dom programming


Plain JS
			 Application(dom) -plain js
			     |
			 Javascript Engine
			      |
			  Browser Engine




Framework/lib
			 Application(JQuery)
			     |
		       ---------------------------
			  JQuery Engine	------javascript programming		
                       -------------------------------
			      |
			 Javascript Engine
			      |
			  Browser Engine



What is jquery engine?
  Jquery engine is also javascript program.




Angular
			 Application(Angular)
			     |
		       ---------------------------
			  Angular Engine : Renderer(Ng2) Renderer2(Ng4,5),Ivy(6,7)		
                       -------------------------------
			      |
			 Javascript Engine
			      |
			  Browser Engine



React


		       Application(React)
			     |
		       ---------------------------
	           React Engine :React fiber-->React 16 on wards		
                       -------------------------------
			      |
			 Javascript Engine
			      |
			  Browser Engine


React is created by face book.

React was created not for others but created for face book one of the use case called "Buddylist" / chat application.

instagram web version was fully built by react.

React most implementations

1.flipkart ui is written react.
2.espn cric info
3.facebook use case chat , graph....
4.netflix
etc......

Where we can use React ? What type of application we can build using react.


Data intensive application // Data driven app
 where more data , which are chainging rapidly, where you want to update ui very faster with out ui flickering.


React can be used to build application for 

.........................................
1.browsers : Desktop
2.Mobile Apps : React Native
.......................................................................................


face book is working on many futures projects related to react

3.React VR : Virtual Reality.
4.React Car : For car applications
5.React TV  : React for TV.
6.React IOT : any devices

We are going to learn react web for browsers.

React core modules:

react.js      => Core module
react-dom.js  => Browser

-----------------------------------------------------------------------------
 Markup layer             |  React Core Engine    | Render Engine   | Target
-----------------------------------------------------------------------------

HTML Markup---------------|  Object Tree(V.DOM)   | ReactDom.render |  Browser

Mobile Markup-------------|  Object Tree          |ReactNative.render| Mobile /Tabs

VR Markup---------------  |  Object Tree          |VR.render         |VR devices

IOT Markup--------------- |  Object Tree          | IOT.render       |IOT Devices   

Object Tree :

Note : in js every html element is object, in browser every element is node which forms tree


<div>
   <h1>
       hello
   </h1>
       |
       div
          |
          h1
            hello

         |
         divObject
		|
		H1 Object
			hello


		|
		React engine
		   |
		   
////////////////////////////////////////////////////////////////////////////////////////////

				React Project Setup
............................................................................................

npm install create-react-app  -g


create-react-app gives

1.webpack


//dom element using java script

function createHeadElement() {
    console.log('dom  is being initalized')
    //create Element
    const divElement = document.getElementById('root')
    element.innerHTML = 'Hello React!'
    divElement.appendChild(element)
}
createHeadElement();
...........................................................................................

dom element using react.

import React from 'react';
import ReactDOM from 'react-dom';

//declare dom element
const HeadElement = <h1>Hello!</h1>;
//render into browser
ReactDOM.render(HeadElement,document.getElementById('root'))
.............................................................................................
			JSX - java script and XML - langugage to create User interfaces
............................................................................................

React uses declarative dom programing using a mini language invented by facebook : JSX

JSX : - javascript xml

 1.PL language built by face book to write user interfaces.
 2.JSX is collection of html markup and javascript.
 3.JSX is dsl and declarative.


	"Since jsx  is a language cant be executed on browser /mobile directly."


JSX compilation model:

                   layout.js / layout.jsx
		       |
		    compiler - babel.js 
			|
		    plain js code
			|-----------------------Dev cycle
	----------------------------------------- -- Excution cycles Starts
  Runtime : React Engine  compiled code feed into react engine
			|
		     Excute compiled js code : function calls
			|
	     create virtual Object tree (in browser V-dom)
		        |
		    Render Engine ; will convert react object tree into js dom object tree
			|
		   Flush the tree into target
			|
	--------------------------------------------
        |
       v8
     Browser
//////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////

JSX is used to create dom elements.

Every DOM element is object.

What is Component ?
  Component is Object , Coined by MS in 1989.

According to ms, Component is object which has state(date),behaviour(methods) + User interface(Visual).
 eg:Button,TextBox,Grid,Menu,MenuBar,Layout,Table.....

Like Object tree(DOM Tree), In React we can create "Component" Tree.


      Node===DOM Object====Component
       h1     HTMLHeading   Heading
..................................................................................

..................................................................................

React uses declarative dom programing using a mini language invented by facebook : JSX

JSX : - javascript xml

 1.PL language built by face book to write user interfaces.
 2.JSX is collection of html markup and javascript.
 3.JSX is dsl and declarative.
 4.Every device has its own jsx language syntax.
 5.Browsers jsx can't be used for building mobile application.


Since jsx  is a language cant be executed on browser /mobile directly.


JSX compilation model:

                   layout.js / layout.jsx
		       |
		    compiler - babel.js 
			|
		    plain js code
			|-----------------------Dev cycle
	----------------------------------------- -- Excution cycles Starts
  Runtime : React Engine  compiled code feed into react engine
			|
		     Excute compiled js code : function calls
			|
	     create virtual Object tree (in browser V-dom)
		        |
		     Render Engine ; will convert react object tree into js dom object tree
			|
		   Flush the tree into target
			|
	--------------------------------------------
        |
     Browser
//////////////////////////////////////////////////////////////////////////////////////////

JSX is used to create dom elements.

Every DOM element is object.

What is Component ?
  Component is Object , Coined by MS in 1989.

According to ms, Component is object which has state(date),behaviour(methods) + User interface(Visual).
 eg:Button,TextBox,Grid,Menu,MenuBar,Layout,Table.....

Like Object tree(DOM Tree), In React we can create "Component" Tree.


      Node===DOM Object====Component
       h1     HTMLHeading   Heading
..................................................................................

..................................................................................

In coding 

Threre two libs 
1.react.js  => to create component and manages all features related component.
2.react-dom => Render engine.

react.js

1.React
  It top level class which provides all apis to create,delete,update components.


react-dom.js

2.ReactDOM
   It is top level class which provides api to flush the v.dom into real dom.

/////////////////////////////////////////////////////////////////////////////////////////////

Terminalogy:

Node -  HTML
DOM  ELEMENT - JS 
Component -  React 

h1  -node
HeadingElement - JS object

Heading -Component.

 node === dom object === component
.........................................................................................

In react we create component means , we create dom object, we create node....

when create collection of nodes 
   tree
   dom tree
   component tree.

First Component:

//create a simple component
import React from 'react';
import ReactDOM from 'react-dom' //render engine: browser

//create component using jsx language 
const Heading = <h1>Hello React!</h1>;

//render Heading into browser
ReactDOM.render(Heading,document.getElementById('root'))
///////////////////////////////////////////////////////////////////////////////////////////

Component Creational Patterns

1.variable pattern
2.function pattern
3.es 6 class pattern


1.variable pattern
..................
//component creational pattern : variable pattern
import React from 'react';
import ReactDOM from 'react-dom' //render engine: browser

//create component using jsx language 
const Heading = <h1>Hello React!</h1>;
console.log(Heading);

//render Heading into browser
ReactDOM.render(Heading,document.getElementById('root'))


2.functions
import React from 'react';
import ReactDOM from 'react-dom';


//create component
// function Heading(){
//     return <h1>Hello!</h1>; //return jsx - object
// }
const Heading = () => <h1>Hello!</h1>; //return jsx - object


//imperative function call
// ReactDOM.render(Heading(),document.getElementById('root'))
//declarative
ReactDOM.render(<Heading></Heading>, document.getElementById('root'))

3.class

import React from 'react';
import ReactDOM from 'react-dom';


class Heading extends React.Component {
   
    render(){
       return <h1>Hello React!</h1>
    }
}

ReactDOM.render(<Heading></Heading>, document.getElementById('root'))
..............................................................................................
JSX : javascript + XML:

Since HTML parser is weak, but when y write react code, we need consistent code generation.

So that react team, developed compiler follows basic xml rules.

<div>
<h1> </h1>
<p>
<img />
</div>

Basic XML  rules:

1.every opened element must be closed
  <h1>Hello</h1>
  <Welcome></Welcome>
 some elements may not have closing tag
  <img /> : image element has no child elements : self closing. 

2. In xml you must have one single root element.
  all elements must be organized under single root element.

 <h1>Welcome to React</h1>
 <p>Path finder</p>

In html what can be root element
 <div>,<span>,all html 5 layout elements header,footer,section,aside...



import React from 'react';
import ReactDOM from 'react-dom';

//invalid jsx
//const Heading = () => <h1>Hello!
// const Heading = () =><h1>Hello</h1><p>Welcome</p>

const Heading = () => <div>
    <h1>Hello</h1>
    <p>Welcome</p>
</div>;

ReactDOM.render(<Heading></Heading>, document.getElementById('root'))

........................

How code gets compiled?

source code:

function Welcome() {
      return <h1>Welcome To React!</h1>;
}
|
babel
|
compiled code
function Welcome() {
  return React.createElement(
    'h1',
    null,
    'Welcome To React!'
  );
}
|
runtime : react engine
function Welcome() {
  return React.createElement(
    'h1',
    null,
    'Welcome To React!'
  );
}
|
//React.createElement
function createElement(args){
   document.createElement(args); // low level api call
}
/////////////////////////////////////////////////////////////////////////////////////////////
				component Composition -Component tree

src/body/body.jsx
import React from "react"

export const Body = () => {
    return <div>
        <h2>Declarative</h2>
        <p>
            React makes it painless to create interactive UIs. Design simple views for each state in your application, and React will efficiently update and render just the right components when your data changes.
            Declarative views make your code more predictable and easier to debug.
        </p>
        <h2>Component-Based</h2>
        <p>
            Build encapsulated components that manage their own state, then compose them to make complex UIs.

            Since component logic is written in JavaScript instead of templates, you can easily pass rich data through your app and keep state out of the DOM
        </p>
        <h2>
            Learn Once, Write Anywhere
        </h2>
        <p>
            We don’t make assumptions about the rest of your technology stack, so you can develop new features in React without rewriting existing code.

            React can also render on the server using Node and power mobile apps using React Native.
        </p>
    </div>
}

src/footer/footer.jsx
import React from  'react';

export const Footer = () => {
    return <nav>
        <hr />
        <h1>Footer</h1>
    </nav>
}
src/header/header.jsx
import React from  'react';

export const Footer = () => {
    return <nav>
        <hr />
        <h1>Footer</h1>
    </nav>
}

src/layout/layout.jsx
import React from 'react';
import { Header } from '../header/header'
import { Footer } from '../footer/footer'
import { Body } from '../body/body'


export const Layout = () => {
    return <div>
        <Header />
        <Body />
        <Footer />
    </div>
}

src/app.js
import React from 'react';
import { Layout } from './layout/layout'

const App = () => <Layout />
export default App;


src/index.js

import React from 'react';
import ReactDOM from 'react-dom';
import App from './App'

ReactDOM.render(<App />, document.getElementById('root'));
.............................................................................................
				Barrel export
.............................................................................................

Use Case :

=>How to avoid multiple import of things from same folder
=>how to avoid file names while import

Barrel export solves the above problem

src/header
 -header.jsx
 -menubar.jsx
 -index.js

import { Header } from './header'
import { MenuBar } from './menubar'


//barrel export: report

export { Header, MenuBar }

src/layout/layout.jsx
import React from 'react';
// import { Header } from '../header/header'
import { Footer } from '../footer/footer'
import { Body } from '../body/body'
import { Header, MenuBar } from './header'; // ./folderName
// import { MenuBar } from '../header/menubar';


export const Layout = () => {
    return <div>
        <Header />
        <MenuBar />
        <Body />
        <Footer />
    </div>
}
////////////////////////////////////////////////////////////////////////////////////////////
				 Dynamic UI
.............................................................................................

React embeds HTML Code inside javascript.

Static UI:
  Only HTML code.

Dyanamic UI:
   Data.

html code + placeholder(data interpolation) = data binding =>dynamic UI


Data Binding Design pattern:

1.Property pattern
2.State Pattern

Place Holder - {data/variable/expression/functionCall}
 <h2>Your Name {name} </h2>

import React from 'react';
import ReactDOM from 'react-dom'

const name = "Subramanian";

const Hello = () => {
    return <h2>Hello {name}</h2>
}


ReactDOM.render(<Hello></Hello>, document.getElementById('root'))
.............................................................................................
				 Property Pattern
.............................................................................................

<div style="color:red"></div>
 
Here div is object inside js engine.
style is object property.
which is initalized via declarative pattern.

React also insipired this pattern , introduced pattern called property pattern.

const Profile = ()=>{

   return <div> </div>
}
...........................................................................................................
				Simple Props

import React from 'react';
import ReactDOM from 'react-dom'

//props = {name:'',message:''}
const Hello = props => {
    console.log(props);
    return <h2>{props.message} {props.name}</h2>
}


// ReactDOM.render(Hello("Subramanian"), document.getElementById('root'))
ReactDOM.render(<Hello name="Subramanian" message="Hai" />, document.getElementById('root'))

What can be props?  What can be supplied as prop?

->Primitives - strings,numbers,booleans
->Object - employee,product
->Array - []
->function - function myfun(){}
->Another component as prop

..
import React from 'react';
import ReactDOM from 'react-dom'

const Profile = props => {
    return <div>
        <h2>Name : {props.name} </h2>
        <h2>Star: {props.star}</h2>
        <h2>Status :{props.status ? "Active" : "InActive"}</h2>
        <address>City {props.address.city}</address>
        <h2>Friends</h2>
        <ul>
            {
                props.friends.map(friend => {
                    return <li>{friend}</li>
                })
            }
        </ul>
    </div>
}

const App = () => {
    const name = "Subramanian";
    const star = 4.5
    const status = true;
    //object
    const address = {
        city: 'Coimbatore'
    }
    //
    const friends = ["Dodge", "Luke", "Nikson", "Milles"]
    return <div>
        <Profile name={name} star={star} friends={friends} status={status} address={address} />
    </div>
}

ReactDOM.render(<App />, document.getElementById('root'))

...........................................................................................
				Object Destrucing
...........................................................................................


import React from 'react';
import ReactDOM from 'react-dom'

const Profile__ = props => {
    const { name, star, status, address: { city }, friends } = props;
    return <div>
        <h2>Name : {name} </h2>
        <h2>Star: {star}</h2>
        <h2>Status :{status ? "Active" : "InActive"}</h2>
        <address>City {city}</address>
        <h2>Friends</h2>
        <ul>
            {
                friends.map(friend => {
                    return <li>{friend}</li>
                })
            }
        </ul>
    </div>
}

const Profile = ({ name, star, status, address: { city }, friends }) => <div>
    <h2>Name : {name} </h2>
    <h2>Star: {star}</h2>
    <h2>Status :{status ? "Active" : "InActive"}</h2>
    <address>City {city}</address>
    <h2>Friends</h2>
    <ul>
        {
            friends.map(friend =><li>{friend}</li>)
        }
    </ul>
</div>

const App = () => {
    const name = "Subramanian";
    const star = 4.5
    const status = true;
    //object
    const address = {
        city: 'Coimbatore'
    }
    //
    const friends = ["Dodge", "Luke", "Nikson", "Milles"]
    return <div>
        <Profile name={name} star={star} friends={friends} status={status} address={address} />
    </div>
}

ReactDOM.render(<App />, document.getElementById('root'))
..............................................................................................
				Classes and Properties
............................................................................................

import React, { Component } from 'react';
import ReactDOM from 'react-dom'



class Profile__ extends Component {

    render() {
        console.log(this.props)
        return <div>
            <h2>Name : {this.props.name} </h2>
            <h2>Star: {this.props.star}</h2>
            <h2>Status :{this.props.status ? "Active" : "InActive"}</h2>
            <address>City {this.props.address.city}</address>
            <h2>Friends</h2>
            <ul>
                {
                    this.props.friends.map(friend => <li>{friend}</li>)
                }
            </ul>
        </div>
    }
}
class Profile extends Component {

    render() {
        const { name, star, status, address: { city }, friends } = this.props;
        return <div>
            <h2>Name : {name} </h2>
            <h2>Star: {star}</h2>
            <h2>Status :{status ? "Active" : "InActive"}</h2>
            <address>City {city}</address>
            <h2>Friends</h2>
            <ul>
                {
                    friends.map(friend => <li>{friend}</li>)
                }
            </ul>
        </div>
    }
}

const App = () => {
    const name = "Subramanian";
    const star = 4.5
    const status = true;
    //object
    const address = {
        city: 'Coimbatore'
    }
    //
    const friends = ["Dodge", "Luke", "Nikson", "Milles"]
    return <div>
        <Profile name={name} star={star} friends={friends} status={status} address={address} />
    </div>
}

ReactDOM.render(<App />, document.getElementById('root'))
..............................................................................................
				Lists and Keys
..............................................................................................

Warning: Each child in a list should have a unique "key" prop.

key is react property,helps identify which items have changed are added , are removed.
In order improve performance incase large list items, similar to index in databases.

  <ul>
                {
                    friends.map((friend, index) => <li key={index.toString()} >{friend}</li>)
                }
            </ul>
.............................................................................................
Lists and UI design:
...................

List can be used to design different types of  ui.

1.ListView -  ul ...li
2.cardView  - div...div
3.gridView - table ..tr
..............................................................................................
				  Default Props
..............................................................................................

import React from 'react';
import ReactDOM from 'react-dom'

//component
const Profile = props => {
    return <div>
        <h2>Name : {props.name} </h2>
        <h2>Star: {props.star}</h2>
        <h2>Status :{props.status ? "Active" : "InActive"}</h2>
        <address>City {props.address.city}</address>
        <h2>Friends</h2>
        <ul>
            {
                props.friends.map(friend => {
                    return <li>{friend}</li>
                })
            }
        </ul>
    </div>
}
//default Props
Profile.defaultProps = {
    name: '',
    star: 0,
    status: false,
    address: {
        city: ''
    },
    friends: []

}



const App = () => {
    const name = "Subramanian";
    const star = 4.5
    const status = true;
    //object
    const address = {
        city: 'Coimbatore'
    }
    //
    const friends = ["Dodge", "Luke", "Nikson", "Milles"]
    return <div>
        <Profile name={name} star={star} friends={friends} status={status} address={address} />
        <Profile />
        <Profile name="Mills" star={3} />
    </div>
}

ReactDOM.render(<App />, document.getElementById('root'))
..............................................................................................
			  Property Constriants or Property Validation
.............................................................................................

if you want to enforce the property type validation, you can use prop constraints.
Prop constrains only for development time.
if prop validation fails, it will throw waring only.


Steps:
npm install --save prop-types


Profile.propTypes = {
    name: PropTypes.string,
    star: PropTypes.number
}
<Profile name="Mills" star={"3"} />
index.js:1 Warning: Failed prop type: Invalid prop `star` of type `string` supplied to `Profile`, expected `number`.
    at Profile (http://localhost:3000/static/js/main.chunk.js:33:35)
    at App


import React from 'react';
import ReactDOM from 'react-dom'
import PropTypes from 'prop-types';

//component
const Profile = props => {
    return <div>
        <h2>Name : {props.name} </h2>
        <h2>Star: {props.star}</h2>
        <h2>Status :{props.status ? "Active" : "InActive"}</h2>
        <address>City {props.address.city}</address>
        <h2>Friends</h2>
        <ul>
            {
                props.friends.map((friend,index) => {
                    return <li key={index}>{friend}</li>
                })
            }
        </ul>
    </div>
}
//default Props
Profile.defaultProps = {
    name: '',
    star: 0,
    status: false,
    address: {
        city: ''
    },
    friends: []

}
//Prop Constrains
Profile.propTypes = {
    name: PropTypes.string,
    star: PropTypes.number
}


const App = () => {
    const name = "Subramanian";
    const star = 4.5
    const status = true;
    //object
    const address = {
        city: 'Coimbatore'
    }
    //
    const friends = ["Dodge", "Luke", "Nikson", "Milles"]
    return <div>
        <Profile name={name} star={star} friends={friends} status={status} address={address} />
        <Profile />
        <Profile name="Mills" star={"3"} />
    </div>
}

ReactDOM.render(<App />, document.getElementById('root'))
..............................................................................................
				Data Mutation and Props
..............................................................................................


import React from 'react';
import ReactDOM from 'react-dom'

const Greeter = props => {
    //override the name prop
    props.name = "foo";
    return <h1>
        Hello {props.name}!
    </h1>
}

const App = () => <div>
    <Greeter name="Subramanian" />
</div>


ReactDOM.render(<App />, document.getElementById('root'))

TypeError: Cannot assign to read only property 'name' of object '#<Object>'
Greeter
E:/session/inspop/my-app/src/index.js:6
  3 | 
  4 | const Greeter = props => {
  5 |     //override the name prop
> 6 |     props.name = "foo";
  7 |     return <h1>
  8 |         Hello {props.name}!
  9 |     </h1>


Compoent Design Principles:

		Component is designed based on functional programming principles.

1.Pure function

A.function receives the set of args, which should return the same.

  eg
     function Greeter(name,message){

             return name + message
     }

    Greeter('foo','hai')

function should not do side effects(changing the input parameters, local variable,IO operation), if fun does, that function is called impure function.

B. to be discussed later.


In React where pure function is used.
 
  In the component design.

Every Component is pure function with respect props.
Every component receives props as parameter , returns the same without mutation.
  

Impure function
const Greeter = props => {
    //override the name prop :mutation
   props.name = "foo";
    return <h1>
        Hello {props.name}!
    </h1>
}

because we try to mutate name prop. -  dont do this.

According to pure function pattern, component has no right to change the data, just it is receiver and which displays only.

			Props are read only , Component is pure
..............................................................................................
		  Component Driven Design:Thinking in Components:Component Communication
................................................................................................

Components should be broken into smallar and reusable.


Component Communication:

1.Parent to child

2.Child to Parent

3.Across the components


1.Parent to child  :Single directinal data flow model
 props

Parent component will send data to child component ,child again can transfer data to its child.

import React from 'react';
import ReactDOM from 'react-dom'
import logo from './logo.svg';

//const Review = User,Comment

export const Movie = props => {
    return <div>
        <h2>{props.title}</h2>
        {/* <Review languages={props.reivew.languages} user={props.reivew.user} comment={props.reivew.comment} /> */}
        {/* Using spread Operator we can pass all prop in short  */}
        <Review {...props.reivew} />
    </div>
}

export const Review = props => {
    console.log(props)
    return <div>
        <User user={props.user}  />
        <Languages languages={props.languages}  />
        <Comment comment={props.comment} />
    </div>
}
export const User = props => <div>
    <h3>{props.user.name}</h3>
    <Avatar url={props.user.imgUrl} />
</div>

export const Languages = props => <ul>
    {
        props.languages.map((language, index) => <li key={index}>{language}</li>)
    }
</ul>
export const Avatar = props => <img height="50" width="50" src={props.url} />

export const Comment = props => <div>
    <h3>{props.comment.text}</h3>
    {/* <h3>{props.}</h3> */}
</div>


const review = {
    user: {
        name: 'Subramanian',
        imgUrl: logo
    },
    languages: ['english', 'tamil', 'hindi'],
    comment: {
        text: 'It is really good!',
        date: new Date()
    }
}
const App = () => <div>
    <Movie title="The Hunter" reivew={review} />
</div>


ReactDOM.render(<App />, document.getElementById('root'))
.............................................................................................
				conditional Rendering
.............................................................................................
How to render component depending upon the state of your application?
How to add conditions? - if or tenary.

import React from 'react';
import ReactDOM from 'react-dom'

const PremiumUser = props => <div>
    <h1>You are PremiumUser</h1>
</div>

const GuestUser = props => <div>
    <h1>You are Guest</h1>
</div>

//conditional rendering
const Page__ = props => {
    const isLoggedIn = props.isLoggedIn;
    if (isLoggedIn) {
        return <PremiumUser />
    } else {
        return <GuestUser />
    }
}
const Page___ = props => {
    const isLoggedIn = props.isLoggedIn;
    return isLoggedIn ? <PremiumUser /> : <GuestUser />
}

const Page = ({ isLoggedIn }) => isLoggedIn ? <PremiumUser /> : <GuestUser />

Page.defaultProps = {
    isLoggedIn: false
}

const isLoggedIn = true
const App = () => <div>
    <Page isLoggedIn={isLoggedIn} />
</div>


ReactDOM.render(<App />, document.getElementById('root'))
..............................................................................................
				 Component as prop
..............................................................................................

Tab
Caresolu
Container components

How to design component that holds other component as child.

<Page /> --- It means Page do not have child components
<Page>
 ?
</Page> - it means Page can have child components
import React from 'react';
import ReactDOM from 'react-dom'
import { Header, MenuBar } from './header'
import { Footer } from './footer/footer'
import { Body } from './body/body'

const Page = props => <div>
    {props.children}
</div>
const App = () => <div>
    <Page>
        <Header />
        <MenuBar />
        <Body />
        <Footer />
    </Page>
</div>


ReactDOM.render(<App />, document.getElementById('root'))
..............................................................................................
				Fragements
..............................................................................................

JSX Rule:

1.YOu must wrapp sibblings inside container elements

Valid
 <div>
   <h1>
   <p>
   <img>
   <Trader/>
 </div>

Invalid:
   <h1>
   <p>
   <img>
   <Trader/>
............
What is Fragment?

A  common pattern in React is for a component return multiple elements.


function Greeter (){
   return <h1></h1><p></p>
}

Here , the code throws error , the reason being , we cant have elements without root element.

This rule some times, makes ui layout complex. sometime which may make difficult to adjust the ui layouts.
import React, { Fragment } from 'react';
import ReactDOM from 'react-dom'
import { Header, MenuBar } from './header'
import { Footer } from './footer/footer'

const Page = props => <div>
    {props.children}
</div>

const Grid = props => {
    return <table border="1">
        <thead >
            <Columns />
        </thead>
        <GridBody users={props.datasource} />
    </table>
}
const GridBody = props => {
    return <>
        <tbody>
            {
                props.users.map((user, index) => {
                    return <tr key={index}>
                        <th scope="row">{user.id}</th>
                        <td>{user.name}</td>
                        <td>{user.email}</td>
                    </tr>
                })
            }

        </tbody>
    </>
}

//withoutFragement
// const Columns = props => {
//     return <div>
//         <td>Name</td>
//         <td>Location</td>
//     </div>
// }
//with Fragement

// const Columns = props => {
//     return <React.Fragment>
//         <td>Name</td>
//         <td>Location</td>
//     </React.Fragment>
// }

// const Columns = props => {
//     return <Fragment>
//         <td>Name</td>
//         <td>Location</td>
//     </Fragment>
// }

const Columns = props => {
    return <>
        <th>id</th>
        <th>name</th>
        <th>email</th>
    </>
}

const USERS = [
    { id: 1, name: 'subramaian', email: 'subu@gmail.com' },
    { id: 2, name: 'Dodge', email: 'dodge@gmail.com' }
]
const App = () => <div>
    <Page>
        <Header />
        <MenuBar />
        <Grid datasource={USERS} />
        <Footer />
    </Page>
</div>


ReactDOM.render(<App />, document.getElementById('root'))
..............................................................................................
			Data Sharing Patterns(Component Communication)


1.Parent to child via props
2.Parent to Grand child or across the components
  2.1. via Context
  2.2. via Redux

...........................................................................................				            Context				


What is Context?
 
Object helps to transfer data from parent to anywhere in herierchy.

Context provides a way to pass data through the component tree without having to pass props down manually at every level.

When to use context?

Context is designed to share data that can considered "global" for a tree of React components
such as theme , login data, preferred langugage.



Without Context:
import React, { Fragment } from 'react';
import ReactDOM from 'react-dom'

const Toolbar = props => <div>
    <ThemedButton theme={props.theme} />
</div>

const ThemedButton = props => <div>
    <Button theme={props.theme} />
</div>
const Button = props => <div>
    <button style={{ color: 'whitesmoke', backgroundColor: props.theme }}>Hello!</button>
</div>
const Page = props => <>
    <Toolbar theme={props.theme} />
</>
const theme = {
    dark: "black"
}
const App = () => <div>
    <Page theme={theme.dark} />
</div>


ReactDOM.render(<App />, document.getElementById('root'))

How to share prop without passing at every level.

import React, { Fragment } from 'react';
import ReactDOM from 'react-dom'



const theme = {
    dark: "red"
}
//create Context

// const ThemeContext = React.createContext('dark')
const { Provider, Consumer } = React.createContext('dark')


// const App = () => <div>
//     <ThemeContext.Provider value={theme}>
//         <Page />
//     </ThemeContext.Provider>
// </div>
const App = () => <div>
    <Provider value={theme}>
        <Page />
    </Provider>
</div>
const Page = props => <>
    <Toolbar />
</>

const Toolbar = props => <div>
    <ThemedButton />
</div>

const ThemedButton = props => <div>
    <Consumer>
        {theme => {
            return <Button theme={theme.dark} />
        }
        }
    </Consumer>

</div>
const Button = props => <div>
    <button style={{ color: 'whitesmoke', backgroundColor: props.theme }}>Hello!</button>
</div>


ReactDOM.render(<App />, document.getElementById('root'))
..............................................................................................
				Styling React Apps
..............................................................................................

CSS: How to integrate CSS into React Apps.

CSS can be added in react.
via style attribute
via class attribute

<div class="container">
</div>

CSS can be your own css or third party libs and frameworks.

1.twetter bootstrap.
2.theme-ui


plain css:


import React from 'react';
import ReactDOM from 'react-dom';
import './App.css';

const Page = props => {
    return <div class="App ">
        <p>
            React Rocks!   <a
                className="App-link"
                href="https://reactjs.org"
                target="_blank"
                rel="noopener noreferrer"
            >
                Learn React
            </a>
        </p>

    </div>
}
const App = props => <>
    <Page />
</>

ReactDOM.render(<App />, document.getElementById('root'));


index.js:1 Warning: Invalid DOM property `class`. Did you mean `className`?
    at div
    at Page
    at App


here we should not use class Attribute -  html attributes, if want to use any html attribute dont use directly , just refer the JSX Attribute guide.


accept acceptCharset accessKey action allowFullScreen alt async autoComplete
autoFocus autoPlay capture cellPadding cellSpacing challenge charSet checked
cite classID className colSpan cols content contentEditable contextMenu controls
controlsList coords crossOrigin data dateTime default defer dir disabled
download draggable encType form formAction formEncType formMethod formNoValidate
formTarget frameBorder headers height hidden high href hrefLang htmlFor
httpEquiv icon id inputMode integrity is keyParams keyType kind label lang list
loop low manifest marginHeight marginWidth max maxLength media mediaGroup method
min minLength multiple muted name noValidate nonce open optimum pattern
placeholder poster preload profile radioGroup readOnly rel required reversed
role rowSpan rows sandbox scope scoped scrolling seamless selected shape size
sizes span spellCheck src srcDoc srcLang srcSet start step style summary
tabIndex target title type useMap value width wmode wrap

          "Attributes are generally camel cased "
..............................................................................................

Style Attribute

<p style="color:red">Hello</p>  - Pure HTML syntax.

In React style attribute is not String rather "Style Object".

Style Object:
............

It is javascript Representation of style.

css style property  -  background-color:'red'
js style property   -  backgroundColor:'red'

const theme = { 
 backgroundColor:'blue'
}
<p style={theme}>Hello</p>  - JSX syntax.

<p style={ {backgroundColor:'blue'}}>Hello</p>  - JSX syntax.

.............................................................................................					bootstrap integration
.............................................................................................

npm install bootstrap

import React from 'react';
import ReactDOM from 'react-dom';
import './App.css';
import 'bootstrap/dist/css/bootstrap.css'

const theme = {
    backgroundColor: 'red',
    fontSize:50
}
const Page = props => {
    return <div className="container">
        <p style={theme}>
            React Rocks!   <a
                className="App-link"
                href="https://reactjs.org"
                target="_blank"
                rel="noopener noreferrer"
            >
                Learn React
            </a>
        </p>

    </div>
}
const App = props => <>
    <Page />
</>

ReactDOM.render(<App />, document.getElementById('root'));

..............................................................................................
				Theme-Ui

It is abstraction on style attribute.

npm install theme-ui


"The sx prop lets you style elements inline, using values from your theme. "

Syntax:

export default (props) => (
  <div
    {...props}
    sx={{
      // values referencing scales defined in a theme
      color: 'primary',
      bg: 'lightgray',
      fontFamily: 'body',
      // raw CSS value
      boxShadow: '0 0 1px 3px rgba(0, 0, 0, .125)',
    }}
  />
)


/** @jsxImportSource theme-ui */

import { ThemeProvider, Box, Grid } from 'theme-ui'

import React from 'react';
import ReactDOM from 'react-dom'

//theme syntax 
export const theme = {
    fonts: {
        body: 'system-ui, sans-serif',
        heading: '"Avenir Next", sans-serif',
        monospace: 'Menlo, monospace',
    },
    colors: {
        text: '#000',
        background: 'green',
        primary: '#33e',
    },
}
export const App = () => (
    <ThemeProvider theme={theme}>
        <h1
            sx={{
                color: 'primary',
                backgroundColor: 'background',
                fontFamily: 'body',
            }}>
            Hello
        </h1>
        <Box p={4} color="white" bg="primary">
            Beep
        </Box>
        <hr/>
        <Grid width={[128, null, 192]}>
            <Box bg="primary">Box</Box>
            <Box bg="muted">Box</Box>
            <Box bg="primary">Box</Box>
            <Box bg="muted">Box</Box>
        </Grid>
    </ThemeProvider>
)

ReactDOM.render(<App />, document.getElementById('root'))
..............................................................................................
				  State
.............................................................................................
..............................................................................................
				State-Dynamic UI - Event Handling
.............................................................................................


state :

state is another way of representing data inside component.

Points:

1.with respect to props, component never modifies data / component never mutates the data.
  -Based on fp principle called "pure function".

2.what if i want to change data /mutate data?
 props never help us, then we need to look at new pattern , that is called state.

state helps to modifiy data/ mutate data.

Component can change the data.

How Component can change the data?

-Via State

How state can be changed

-Via Events

When ever the component change the data via events, component need to repaint, React uses an alogorthim "Diff algorthim" - virtual dom.

State changes should be done in pure function.

.we have 2nd rule ,now we will discuss now.


state
The state contains data specific to this component that may change over time. The state is user-defined, and it should be a plain JavaScript object.


Handing Event:
Handling events in react elements is similar to handling events on DOM elements.
There are differences.

=>React events are named camelCase rather lowercase.
=>With JSX we pass a function as the event handler, rather than a string.

<button onclick="onSave()"> - html

<button onClick={listener}>

Event handler takes event object as arg. In React this event object is instance of "SyntheticEvent"

  onIncrement = event => {
        console.log(event)
        console.log('onIncrement')
        //mutate the state.
        this.state.value = this.state.value + 1
        console.log(this.state)
    };

Here the state is mutated directly. dont do this. , we cant .

React uses a concept called pure function. through pure function only we can update the state.



Pattern - 1 : create new Object and copy the existing object properties into new Object.



//impure version
// function updateProfile(profile) {
//     //mutatation
//     profile.city = 'Coimbatore';
//     return profile;
// }


//pure function : in order to create immutable representation of object 
//we have three patterns.

//pattern -1
function updateProfile(profile) {
    //new object
    //copy the properties of old object and modify the property what you want todo
    return {
        id: profile.id,
        name: profile.name,
        city: 'Coimbatore'
    };
}


let profile = {
    id: 1,
    name: 'subramanian',
    city: 'Chennai'
};

//Freeze the object before modification.
Object.freeze(profile);

let updatedProfile = updateProfile(profile);
console.log(updatedProfile);
//same object or different object
console.log("Same Object (profile===updatedProfile) ? =>", updatedProfile === profile);
///////////////////////////////////////////////////////////////////////////////////

// function addNewPower(person) {
//     //add new property
//     person.specialPower = 'invisibility';
//     return person;
// }

function addNewPower(person) {
    return {
        firstName: person.firstName,
        lastName: person.lastName,
        address: {
            street: person.address.street,
            city: person.address.city,
            state: person.address.state
        },
        specialPower: 'invisibility'
    };
}
let person = {
    firstName: 'Subramanian',
    lastName: 'Murugan',
    address: {
        street: '10 th street',
        city: 'Coimbatore',
        state: 'TN'
    }
};
console.log('old Person', person);

let newPerson = addNewPower(person);

console.log('new Person', newPerson);

console.log("Same Object (person===newPerson) ? =>", person === newPerson);
.............................................................................................
.............................................................................................

.............................................................................................

Pattern - 2 : Object.assign

//pattern -2
function updateProfile(profile) {
    //new object
    return Object.assign({}, profile, { city: 'Coimbatore' })
}


let profile = {
    id: 1,
    name: 'subramanian',
    city: 'Chennai'
};

//Freeze the object before modification.
Object.freeze(profile);

let updatedProfile = updateProfile(profile);
console.log(updatedProfile);
//same object or different object
console.log("Same Object (profile===updatedProfile) ? =>", updatedProfile === profile);
///////////////////////////////////////////////////////////////////////////////////

// function addNewPower(person) {
//     //add new property
//     person.specialPower = 'invisibility';
//     return person;
// }

function addNewPower(person) {
    // return {
    //     firstName: person.firstName,
    //     lastName: person.lastName,
    //     address: {
    //         street: person.address.street,
    //         city: person.address.city,
    //         state: person.address.state
    //     },
    //     specialPower: 'invisibility'
    // };
    return Object.assign({}, person, { specialPower: 'invisibility' })

}
let person = {
    firstName: 'Subramanian',
    lastName: 'Murugan',
    address: {
        street: '10 th street',
        city: 'Coimbatore',
        state: 'TN'
    }
};
console.log('old Person', person);

let newPerson = addNewPower(person);

console.log('new Person', newPerson);

console.log("Same Object (person===newPerson) ? =>", person === newPerson);
.............................................................................................

Pattern 3: Spread Operator
//pattern -2
function updateProfile(profile) {
    //new object
    //  return Object.assign({}, profile, { city: 'Coimbatore' })
    return { ...profile, city: 'Coimbatore' }
}


let profile = {
    id: 1,
    name: 'subramanian',
    city: 'Chennai'
};

//Freeze the object before modification.
Object.freeze(profile);

let updatedProfile = updateProfile(profile);
console.log(updatedProfile);
//same object or different object
console.log("Same Object (profile===updatedProfile) ? =>", updatedProfile === profile);
///////////////////////////////////////////////////////////////////////////////////

// function addNewPower(person) {
//     //add new property
//     person.specialPower = 'invisibility';
//     return person;
// }

function addNewPower(person) {
    // return {
    //     firstName: person.firstName,
    //     lastName: person.lastName,
    //     address: {
    //         street: person.address.street,
    //         city: person.address.city,
    //         state: person.address.state
    //     },
    //     specialPower: 'invisibility'
    // };
    // return Object.assign({}, person, { specialPower: 'invisibility' })
    return {
        ...person, specialPower: 'invisibility'
    }

}
let person = {
    firstName: 'Subramanian',
    lastName: 'Murugan',
    address: {
        street: '10 th street',
        city: 'Coimbatore',
        state: 'TN'
    }
};
console.log('old Person', person);

let newPerson = addNewPower(person);

console.log('new Person', newPerson);

console.log("Same Object (person===newPerson) ? =>", person === newPerson);
.............................................................................................
				.............................................................................................
				Mutable and Immutable with Respect to arrays
.....................................................................................

//array 

//immpure function
// function addItem(items) {
//     //add 
//     items.push(4);
//     return items;
// }
// //pattern 1
// function addItem(items) {
//     //items.push(4);
//     return items.concat(4);
// }

//pattern 2
function addItem(items) {
    //items.push(4);
    return [...items, 4];
}
let items = [1, 2, 3];
console.log('Old Items => ', items);
let newItems = addItem(items)
console.log('new Items => ', newItems);

console.log("Same Object (oldItems===newItems) ? =>", items === newItems);
//////////////////////////////////////////////////////////////////////////////////////////////

function increasePointByTwo(state){
     //spread notation
     return {
        ...state, // level-0 copy
        house: {
            ...state.house, //level -1 copy
            points: state.house.points + 2
        }
    }

}

let state = {
    house: {
        name: 'RavenClaw',
        points: 10
    }
}
//increase pointer by 2
let newState = increasePointByTwo(state);

console.log("Same Object (state===newState) ? =>", state === newState);

function updateMobileNo(customer, mobileno) {

    return {
        ...customer,
        contact: {
            ...customer.contact,
            communication: {
                ...customer.contact.communication,
                mobileno: mobileno
            }
        }
    }

}

let customer = {
    id: 1,
    name: 'Subramanian',
    contact: {
        address: {
            city: 'Coimbatore'
        },
        communication: {
            mobileno: '9000000000'
        }
    }
}
console.log(customer);

const updatedCustomer = updateMobileNo(customer, '9003706368')
console.log("Same Object (customer===updatedCustomer) ? =>", customer === updatedCustomer);
console.log(updatedCustomer);
..............................................................................................
					immer.js
				 (Very Smart immutable lib)
..............................................................................................

Immer simplifies handling immutable data structures.

How to access object properties and update?


our code
state.house.points = state.house.points +2

immercode
{
        ...state, // level-0 copy
        house: {
            ...state.house, //level -1 copy
            points: state.house.points + 2
        }
    }

mutable way of writing immutable code.
import produce from "immer";

function updateProfile(profile) {

    return produce(profile, draft => {
        //mutable code but it is immutable
        console.log(draft)
        draft.city = 'Coimbatore'
    })
}

let profile = {
    id: 1,
    name: 'subramanian',
    city: 'Chennai'
};

let updatedProfile = updateProfile(profile);
console.log(updatedProfile);
console.log("Same Object (profile===updatedProfile) ? =>", updatedProfile === profile);

function updateMobileNo(customer, mobileno) {
    // return {
    //     ...customer,
    //     contact: {
    //         ...customer.contact,
    //         communication: {
    //             ...customer.contact.communication,
    //             mobileno: mobileno
    //         }
    //     }
    // }
    return produce(customer, newCustomer => {
        newCustomer.contact.communication.mobileno = mobileno
    });

}

let customer = {
    id: 1,
    name: 'Subramanian',
    contact: {
        address: {
            city: 'Coimbatore'
        },
        communication: {
            mobileno: '9000000000'
        }
    }
}
console.log(customer);

const updatedCustomer = updateMobileNo(customer, '9003706368')
console.log("Same Object (customer===updatedCustomer) ? =>", customer === updatedCustomer);
console.log(updatedCustomer);
..............................................................................................

..............................................................................................
				React and State Management
..............................................................................................

React state mutatations can be done only inside class components, but we have now lot of abstractions- now a days we can  use state inside functional components as well using hooks.

State,How to mutate,Event Handling.
.....................................



setState(updater, [callback]):NewState/NextState

updater - which is function, where we write immutable logic

updater syntax

function(previousState) {
  return newStateObject
}

import React, { Component } from 'react';
import ReactDOM from 'react-dom';
import produce from 'immer';

class Counter extends Component {
    //state 
    state = {
        value: 0
    }
    //event handler
    onIncrement = event => {
        console.log(event)
        console.log('onIncrement')
        //mutate the state.
        //this.state.value = this.state.value + 1
        //pure function: react provides built in pure function , 
        // this.setState(function (prevState) {
        //     //return  new State
        //     return {
        //         value: prevState.value + 1
        //     }

        // })
        // this.setState(prevState => {
        //     //return  new State
        //     return {
        //         value: prevState.value + 1
        //     }

        // })

        // this.setState(prevState => {
        //     //return  new State
        //     return Object.assign({}, prevState, { value: prevState.value + 1 })

        // })
        // this.setState(prevState => {
        //     //return  new State
        //     return { ...prevState, value: prevState.value + 1 }
        // })
        this.setState(prevState => {
            //return  new State
            return produce(prevState, draft => {
                draft.value += 1
            });
        })
        console.log(this.state)
    };
    render() {
        console.log(this.state)
        return <>
            <h1>Counter-State</h1>
            <h2>Value {this.state.value}</h2>
            <button onClick={this.onIncrement}>+</button>
        </>
    }
}

const App = props => <div>
    <Counter />
</div>;
ReactDOM.render(<App />, document.getElementById('root'))
.............................................................................................
			 Event Handlers - inline, external event handlers
.............................................................................................
import React, { Component } from 'react';
import ReactDOM from 'react-dom';
import produce from 'immer';

class Counter extends Component {
    //state 
    state = {
        value: 0
    }
    //event handler :External event handler
    onIncrement = event => {
        this.setState(prevState => {
            return produce(prevState, draft => {
                draft.value += 1
            });
        })
    };
    render() {
        console.log(this.state)
        return <>
            <h1>Counter-State</h1>
            <h2>Value {this.state.value}</h2>
            <button onClick={this.onIncrement}>+</button>
            <button onClick={event => {
                this.setState(prevState => {
                    return produce(prevState, draft => {
                        draft.value -= 1
                    });
                })
            }}>-</button>
        </>
    }
}

const App = props => <div>
    <Counter />
</div>;
ReactDOM.render(<App />, document.getElementById('root'))
.............................................................................................
				List and events
.............................................................................................
import React, { Component } from 'react';
import ReactDOM from 'react-dom';
import produce from 'immer';
import { COMMENTS } from './mock-data/comments';

class CommentList extends Component {
    //state 
    state = {
        body: ''
    }

    selectComment = body => {
        console.log(body)
        this.setState(prevState => {
            return produce(prevState, draft => {
                draft.body = body;
            });
        })
    }

    render() {
        return <>
            <h1>List</h1>
            <ul>
                {
                    this.props.comments.map((comment, index) => {
                        return <li key={index} onClick={(event) => {
                            this.selectComment(comment.body);
                        }} >{comment.name}</li>
                    })
                }
            </ul>
            <hr />
            <h3>{this.state.body}</h3>
        </>
    }
}

const App = props => <div>
    <CommentList comments={COMMENTS} />
</div>;
ReactDOM.render(<App />, document.getElementById('root'))
.............................................................................................
		  State,Props,Container Components and Presentational Components
.............................................................................................

Property types:
1.static prop - hardcoded
2.dynamic prop - state as a prop
3.function as prop


According react coding best practice, state,logic and ui must be separated.

The component having state and logic, called "container components".
The component having UI called "Presentational Components". ->Gets data as prop



import React, { Component } from 'react';
import ReactDOM from 'react-dom';
import produce from 'immer';

//container components
class Counter extends Component {
    //state 
    state = {
        value: 0
    }
    onIncrement = event => {
        this.setState(prevState => {
            return produce(prevState, draft => {
                draft.value += 1
            });
        })
    };
    render() {
        return <>
            <CounterView {...this.state} onIncrement={this.onIncrement} />
        </>
    }
}
//Presentational component
const CounterView = props => {
    return <>
        <h1>State + Props</h1>
        <h2>Value {props.value}</h2>
        <button onClick={props.onIncrement}>+</button>
    </>
}

const App = props => <div>
    <Counter />
</div>;
ReactDOM.render(<App />, document.getElementById('root'))
.............................................................................................
			Input,SyntheticEvent
..............................................................................................

Apis of synthetic Event

1.target
2.preventDefault
3.stopPropaation()

import React, { Component } from 'react';
import ReactDOM from 'react-dom';
import produce from 'immer';

class TodoApp extends Component {
    state = {
        items: [],
        text: ''
    }

    handleChange = evt => {
        this.setState(prvState => {
            return {
                items: prvState.items,
                text: evt.target.value
            }
        })
    }

    handleSubmit = evt => {
        //stop firing default event submission
        evt.preventDefault();
        if (this.state.text.length === 0) {
            return;
        }
        const newItem = {
            text: this.state.text,
            id: Math.random()
        }
        this.setState(preState => {
            return { ...preState, items: preState.items.concat(newItem), text: '' }
        })
    }

    render() {
        return <>
            <h3>TODO</h3>
            <TodoList items={this.state.items} />
            <form onSubmit={this.handleSubmit}>
                <label htmlFor="new-todo">What needs to be done?</label>
                <input id="new-todo" onChange={this.handleChange} value={this.state.text} />
                <button>Add #{this.state.items.length + 1}</button>
            </form>
        </>
    }
}
const TodoList = props => {
    return <ul>
        {props.items.map(item => {
            return <li key={item.id}>{item.text}</li>
        })}
    </ul>
}

const App = props => <div>
    <TodoApp />
</div>;
ReactDOM.render(<App />, document.getElementById('root'))
.............................................................................................
			 Component Life Cycles - Rest api integration



Life cycle:

Phases:

1.Mount
 -constructor
    called only once, for compoent initalization
  constructors are not used very much
 -render 
    called for creating object tree(component tree) -  Virtual DOM.
 -componentDidMount
   called only one time, to ensure that vdom has transfered as real time.

2.Update
  new Props / setState/ forceUpdate trigger update cycle
  
  -render 
   
  -componentDidupdate
    called after every update process is done

3.UnMount
   if any component is removed from the dom tree.

  componentWillUnMount
    used to clean up resources



...............................................................................................

Flow:


Component tree-VDOM--Mount 

User----Clicks button-- state Update---setState->will return new App state--render is called----creates new vdom with new state

render --|new Frame----|Reconciliation----->Takes snapshot of rendered dom tree--diff it--patch it--update --repaint.

import React, { Component } from 'react';
import ReactDOM from 'react-dom';

class Parent extends Component {

    state = {
        value: 0
    }
    //constructors
    constructor() {
        super()
        console.log('Parent Constructor')
    }
    render() {
        console.log('Parent render is called')
        return <>
            <Child />
            <button onClick={() => {
                this.setState(state => {
                    return {
                        value: state.value + 1
                    }
                })
            }}>Increment</button>
        </>
    }
    componentDidMount() {
        console.log('Parent - componentDidMount  is called')

    }
    componentDidUpdate() {
        console.log('Parent - componentDidUpdate  is called')

    }

}
class Child extends Component {
    //constructors
    constructor() {
        super()
        console.log('Child Constructor')
    }
    render() {
        console.log('Child render is called')
        return <>
        </>
    }
    componentDidMount() {
        console.log('Child - componentDidMount  is called')

    }
    componentDidUpdate() {
        console.log('Child - componentDidUpdate  is called')

    }

}

const App = props => <div>
    <Parent />
</div>
ReactDOM.render(<Parent />, document.getElementById('root'))
...........................................................................................
				Most use full Component Life cycle methods

1.render
2.componentDidMount
 -Ajax calls
 -timer calls
 -websocket calls
 -graphl calls


Ajax Calls:

React has no any api to make call.

libs/api

fetch
axios


import React, { Component } from 'react';
import ReactDOM from 'react-dom';

class TodoApp extends Component {

    state = {
        error: null,
        isLoaded: false,
        todos: []
    }

    render() {
        const { error, isLoaded, todos } = this.state;
        if (error) {
            return <div>Error : {error.message}</div>
        }
        else if (!isLoaded) {
            return <div>Loading....</div>
        } else {
            return <>
                <ul>
                    {todos.map((todo, index) => {
                        return <li key={index}>
                            {todo.title} - {todo.completed ? 'Completed' : 'Not Completed'}
                        </li>
                    })}
                </ul>
            </>
        }


    }
    componentDidMount() {
        const url = 'https://jsonplaceholder.typicode.com/todos'
        fetch(url).then(async (response) => {
            const todos = await response.json();
            this.setState(prevState => {
                return {
                    error: prevState.error,
                    isLoaded: true,
                    todos: todos
                }
            })
        }, error => {
            this.setState(prevState => {
                return {
                    error: error,
                    isLoaded: true,
                    todos: prevState.todos
                }
            })
        })
    }


}

const App = props => <div>
    <TodoApp />
</div>
ReactDOM.render(<App />, document.getElementById('root'))
..............................................................................................
				React Hooks
..............................................................................................

Hooks lets you use state and other react features without writing a class.

Hooks Movtivations:

1.Avoid confussion between class and function components.

2.Reuse statefull logics among components

3.Component composition of logic is possible.

Hooks 
What is hook in nutshell?

 hook is a function  which may return value.

hook function naming Convention:

"use"+functionName ==>hook Syntax
"useState"
"useContext"
"useEffect"
"useAjax"
"useWebSocket"
etc....

How to avoid state -setState ? How to introduce state inside functional compoent.

import React, { useState } from 'react';
import ReactDOM from 'react-dom';


//hooks:useState
const CounterApp = props => {
    //declare state variables
    const [value, setValue] = useState(props.init)
    //Listener
    const onIncrement = evt => {
        setValue(state => {
            return state + 1
        })
    }
    return <div>
        <h1>Value: {value}</h1>
        <button onClick={onIncrement}>+</button>
        <button onClick={() => setValue(value - 1)}>-</button>

    </div>
}


const App = props => <div>
    <CounterApp init={10} />
</div>
ReactDOM.render(<App />, document.getElementById('root'))
............................................................................................
	                   literal objects and hooks,immer produce
............................................................................................

import produce from 'immer';
import React, { useState } from 'react';
import ReactDOM from 'react-dom';


const Counter = props => {
    const initalState = {
        values: {
            inc: 10
        }
    };
    const [counter, setCounter] = useState(initalState);
    const onIncrement = evt => {
        setCounter(produce(state => {
            state.values.inc += 1;
        }));
    };

    return <>
        <h1>Counter App-Using State and Hooks</h1>
        <h1>Value : {counter.values.inc}</h1>
        <button onClick={onIncrement}>+</button>
    </>

};
const App = () => {
    return <Counter />
}
ReactDOM.render(<App />, document.getElementById('root'));

.............................................................................................
...........................................................................................
				React Life Cycle Methods
............................................................................................

			 ComponentDidMount and ComponentDidUpdate
		              How to Replace using Hooks
				  useEffect


Side Effects , DOM Manipulation,ResourceManagement:
...................................................

What is Side effects?

Changining DOM elements after vdom is mounted into real dom - componentDidMount.

import produce from 'immer';
import React, { useState, useEffect } from 'react';
import ReactDOM from 'react-dom';


const Page = props => {
    const [count, setCount] = useState(0)
    //compoentDidMount
    useEffect(() => {
        document.title = `You have clicked ${count} times`
    })
    return <>
        <button onClick={() => setCount(count + 1)}>Hit</button>
    </>
};
const App = () => {
    return <Page />
}
ReactDOM.render(<App />, document.getElementById('root'));
.............................................................................................
				Multihooks 
.............................................................................................
How many hooks we can have in a component?

many.
import produce from 'immer';
import React, { useState, useEffect } from 'react';
import ReactDOM from 'react-dom';


const Counter = props => {
    const [count, setCount] = useState(0)
    const [like, setLike] = useState(10);

    //compoentDidMount
    useEffect(() => {
        document.title = `You have clicked ${count} times`
    })
    useEffect(() => {
        setTimeout(() => {
            alert('You have been hacked')
        }, 10000)
    })
    return <>
        <h1>Likes {like}</h1>
        <button onClick={() => setCount(count + 1)}>Hit</button>
        <button onClick={() => setLike(like + 2)}>Like</button>
    </>
};
const App = () => {
    return <Counter />
}
ReactDOM.render(<App />, document.getElementById('root'));
.............................................................................................
			ComponentwillUnMount - useEffect Hook.
   useEffect(() => {
        document.title = `You have clicked ${count} times`
 
        return function() {
           //component clean up code
        }

    })

import produce from 'immer';
import React, { useState, useEffect } from 'react';
import ReactDOM from 'react-dom';


const Counter = props => {
    const [count, setCount] = useState(0)
    const [like, setLike] = useState(10);

    useEffect(() => {
        document.title = `You have clicked ${count} times`
        //clean up code
        return function () {
            //unsubscrption/closing sockets....
            console.log('clean')
        }
    })
    return <>
        <h1>Likes {like}</h1>
        <button onClick={() => setCount(count + 1)}>Hit</button>
        <button onClick={() => setLike(like + 2)}>Like</button>
    </>
};
const App = () => {
    return <Counter />
}
ReactDOM.render(<App />, document.getElementById('root'));
..............................................................................................
Built in Hooks from React itself:
-useState
-useEffect
-useContext

-useReducer
-useCallback
-useMemo
-useRef
-useLayoutEffect
etc....
.............................................................................................
					Custom Hooks
...........................................................................................

//Custom Hooks
import React, { useEffect, useState } from 'react';
import ReactDOM from 'react-dom';

//features;

const Customer = props => {
    //feature-1 update Screen title
    const [screen, setScreen] = useState('Customer Manager App')
    //feature 2 - get Window width
    const [width, setWidth] = useState(window.innerWidth);

    //useEffect to update window title after component mounted into dom
    useEffect(() => {
        document.title = screen;
    })
    
    useEffect(() => {
        const handleResize = () => setWidth(window.innerWidth)
        //imperative dom listner
        window.addEventListener('resize', handleResize)
        //clean up code
        return () => {
            window.removeEventListener('resize', handleResize);
        }
    });

    return <div>
        <h1>Custom Hooks</h1>
        <h1>Current Window width {width}</h1>
        <button onClick={() => {
            setScreen('CustomerManager App-Update')
        }}>Update Title</button>
    </div>
};

const App = () => {
    return <div>
        <Customer />
    </div>
}
ReactDOM.render(<App />, document.getElementById('root'));
.............................................................................................

CustomHook- windowtitle
In the above code, we have dubbed some dom related code inside customer component, which is not good.

what if i want changing title of the screen in other components, we have to duplicate the code.

How to write resuable code? 
  hooks- write all duplicate code into a hook.

In the above code , we have so many hooks which makes your application less maintainable, testable , code duplication.
For eg, i want window resize behaviour in another component.

Custom hooks, you can create windowresize as custom Hook.

How to write custom hooks?

Custom hooks are plain javascript function.
function will start with "use+HookName" , but name can be any thing but it is recommended.

.............................................................................................

src/hooks/usewindowtitlehook.js

import { useState, useEffect } from 'react';


function useWindowTitle(windowTitle = '') {
    const [screen, setScreen] = useState(windowTitle)
    //useEffect to update window title after component mounted into dom
    useEffect(() => {
        document.title = screen;
    })
    //return object, so that caller can use this api
    return {
        screen,
        setScreen
    };
}

export { useWindowTitle };

src/hooks/usewindowwidthhook.js
import { useState, useEffect } from 'react';



function useWindowWidth() {
    const [width, setWidth] = useState(window.innerWidth);

    useEffect(() => {
        const handleResize = () => setWidth(window.innerWidth)
        //imperative dom listner
        window.addEventListener('resize', handleResize)
        //clean up code
        return () => {
            window.removeEventListener('resize', handleResize);
        }
    });
    return width;
}

export { useWindowWidth }




	